"0","# Load necessary library"
"0","library(patchwork)"
"0",""
"0","# Categorize bedtime into six periods"
"0","sleep <- sleep %>%"
"0","  mutate("
"0","    BedtimeCategory = case_when("
"0","      Bed_hour >= 20 & Bed_hour < 22 ~ ""20:00-21:59"","
"0","      Bed_hour >= 22 & Bed_hour < 24  ~ ""22:00-23:59"","
"0","      Bed_hour >= 0  & Bed_hour < 2  ~ ""00:00-01:59"","
"0","      Bed_hour >= 2  & Bed_hour < 4  ~ ""02:00-03:59"","
"0","      Bed_hour >= 4  & Bed_hour < 6  ~ ""04:00-05:59"","
"0","      TRUE ~ ""Other"""
"0","    ),"
"0","    BedtimeCategory = factor(BedtimeCategory, "
"0","                             levels = c(""20:00-21:59"", ""22:00-23:59"", ""00:00-01:59"","
"0","                                        ""02:00-03:59"", ""04:00-05:59"", ""Other""))"
"0","  )"
"0",""
"0","# Create individual boxplots"
"0","p1 <- ggplot(sleep, aes(x = BedtimeCategory, y = SleepEfficiency, fill = BedtimeCategory)) +"
"0","  geom_boxplot() +"
"0","  labs(title = ""Sleep Efficiency"", x = ""Bedtime Period"", y = ""Sleep Efficiency (%)"") +"
"0","  theme_minimal() +"
"0","  theme(axis.text.x = element_text(angle = 45, hjust = 1), legend.position = ""none"")"
"0",""
"0","p2 <- ggplot(sleep, aes(x = BedtimeCategory, y = TTS, fill = BedtimeCategory)) +"
"0","  geom_boxplot() +"
"0","  labs(title = ""Time to Sleep (TTS)"", x = ""Bedtime Period"", y = ""TTS (minutes)"") +"
"0","  theme_minimal() +"
"0","  theme(axis.text.x = element_text(angle = 45, hjust = 1), legend.position = ""none"")"
"0",""
"0","p3 <- ggplot(sleep, aes(x = BedtimeCategory, y = Awake_time, fill = BedtimeCategory)) +"
"0","  geom_boxplot() +"
"0","  labs(title = ""Awake Time"", x = ""Bedtime Period"", y = ""Awake Time (minutes)"") +"
"0","  theme_minimal() +"
"0","  theme(axis.text.x = element_text(angle = 45, hjust = 1), legend.position = ""none"")"
"0",""
"0","p4 <- ggplot(sleep, aes(x = BedtimeCategory, y = TST, fill = BedtimeCategory)) +"
"0","  geom_boxplot() +"
"0","  labs(title = ""Total Sleep Time (TST)"", x = ""Bedtime Period"", y = ""TST (minutes)"") +"
"0","  theme_minimal() +"
"0","  theme(axis.text.x = element_text(angle = 45, hjust = 1), legend.position = ""none"")"
"0",""
"0",""
"0","combined_plot <- (p1 | p2) / (p3 | p4) + "
"0","  plot_annotation("
"0","    title = ""Effect of Bedtime on Sleep Metrics"","
"0","    theme = theme(plot.title = element_text(size = 16, face = ""bold""))"
"0","  )"
